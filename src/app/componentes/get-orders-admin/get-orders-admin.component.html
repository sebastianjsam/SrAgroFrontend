<br>
<div class="container">
<h1>Solicitudes de pedidos - compradores</h1>
<br>
<div>
  Filtrar por fechas:
  <input [(ngModel)]="date_filter" name="date_filter" type="date" id="start" name="trip-start"
       value="2021-11-01"
       min="2021-01-01" max="2025-12-31">
       &nbsp; 
       <button type="button" (click)="filtrarOrders()" class="btn btn-danger btn-sm">Filtrar</button>
</div>

<br>

<div id="scroll">
  <table  class="table table-sm">
    <thead>
        <tr class="table-success">
          <!--<th scope="col">Cod.</th>-->
          <th scope="col">Estado</th>
          <th scope="col">N° de pedido</th>
          <th scope="col">Comprador</th>
          <th scope="col">Total pagar</th>
          <th scope="col">Estado de pago</th>
          <th scope="col">Fecha de orden</th>
          <th scope="col">Supervisor</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>
      <tbody>


        <tr *ngFor="let item of orders">
            <td>
              <img src="../../../assets/{{item.stateorder}}.png" alt="">
            </td>
            <td>{{item.id_order}}</td>
            <td>{{item.fullname}}</td>
            <td>{{item.quantity_pay}}</td>
            <td>{{item.status_pay}}</td>
            <td>{{item.date_order}}</td>
            <td>{{item.supervisor}}</td>
            <td>
              <button type="button" (click)="orderBillAdmin(item.id_order)" class="btn btn-success btn-sm">Ver</button>&nbsp;
              <button type="button" (click)="adminOrder()" class="btn btn-info btn-sm">Administrar</button>
            </td>

        </tr>
    </tbody>
  </table>
</div>


<div class="row">

<div class="col-4">
  <strong>Información pedidos</strong><br>
  Total pedidos: <br><br>
  <ul class="list-group">
    <li class="list-group-item">
      <strong>Solicitados:</strong> &nbsp;{{num_solic}}
    </li>
    <li class="list-group-item">
      <strong>Pagados:</strong> &nbsp;{{num_pay}}
    </li>
    <li class="list-group-item">
      <strong>En trámite:</strong> &nbsp;{{num_tram}}
    </li>
  </ul>
  

</div>

<div class="col-8">

  <ul class="list-group">
    <li class="list-group-item list-group-item-light ">
      <br><br><br><br><br>

      <h3>Total pagados:</h3>$&nbsp;{{total_pay}}
    <br><br><br>
    </li>
    
  </ul>
 
</div>

</div>


</div>


<div *ngIf = "openForm==2">
  <div  class="window-notice" id="window-notice">
    <div class="content">
      <br>
        <h1>Pedido N°&nbsp;{{id_order}}</h1>
        <br>
        <strong style="color: green;">Información completa de la orden de compra</strong>
      <br>
        <div class="content-text">

          <div class="row" id="scroll">

            <div class="col-6">
              
              <ul class="list-group">
                <li class="list-group-item list-group-item-warning">
                  <strong>TOTAL PAGAR:</strong> &nbsp;{{orderBillCus.quantity_pay}}
                </li>
                <li class="list-group-item">
                  <strong>Estado de pago:</strong> &nbsp;{{orderBillCus.status_pay}}
                </li>
                <li class="list-group-item">
                  <strong>Fecha de solicitud:</strong> &nbsp;{{orderBillCus.date_order}}
                </li>
                <li class="list-group-item">
                  <strong>Fecha aproximada de entrega:</strong> &nbsp;{{orderBillCus.date_sent}}
                </li>
                <li class="list-group-item">
                  <strong>Método de pago:</strong> &nbsp;{{orderBillCus.pay_method}}
                </li>
                <li class="list-group-item list-group-item-danger">
                  <strong>Supervisor:</strong> &nbsp;{{orderBillCus.supervisor}}
                </li>
              </ul>

            </div>

            <div class="col-6">

              <ul class="list-group">
                <li class="list-group-item">
                  <strong>Comprador:</strong> &nbsp;{{orderBillCus.customer_name}}
                </li>
                <li class="list-group-item">
                  <strong>Dirección de envio:</strong> &nbsp;{{orderBillCus.shipping_address}}
                </li>
                <li class="list-group-item">
                  <strong>Teléfono:</strong> &nbsp;{{orderBillCus.phone}}
                </li>
                <li class="list-group-item">
                  <strong>Ciudad:</strong> &nbsp;{{orderBillCus.city}}
                </li>
                <li class="list-group-item">
                  <strong>( * )Estado de la compra:</strong> &nbsp;{{orderBillCus.status_bill}}
                </li>
              </ul>
            </div>
          </div>
          <br>
          <strong style="color:green;">Listado de productos</strong>
           <br><br>
          <div id="scroll">
            <table  class="table table-sm">
              <thead>
                  <tr class="table-success">
                    <!--<th scope="col">Cod.</th>-->
                    <th scope="col">Nombre</th>
                    <th scope="col">Precio (Unidad)</th>
                    <th scope="col">Cantidad</th>
                    <th scope="col">Unidades</th>
                    <th scope="col">Desc %</th>
                  </tr>
                </thead>
                <tbody>


                  <tr *ngFor="let item of dataTableOrder">
                      <!--<th scope="row">{{item.cod_product}}</th>-->
                      <td>{{item.name}}</td>
                      <td>{{item.price_unity}}</td>
                      <td>{{item.quantity}}</td>
                      <td>{{item.type_quantity}}</td>
                      <td>{{item.descount}}</td>

                  </tr>
              </tbody>
            </table>
          </div>

            <div class="container">
              <br>
            <div class="row">

              <div class="col-11">
                <strong>Comentario:</strong> &nbsp;{{orderBillCus.description}}
              </div>
              <div class="col-1">
                  <button type="button" (click)="closeOrderBill()" class="btn btn-success">Cerrar</button>&nbsp;
              </div>
            </div>
            </div>

       </div>
  </div>
</div>

</div>